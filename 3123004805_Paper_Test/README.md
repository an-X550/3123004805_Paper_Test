# 论文查重系统

**学号：3123004805**

## 项目介绍

本项目实现了一个高效的论文查重系统，给出一个原文文件和一个在这份原文上经过了增删改的抄袭版论文的文件，在答案文件中输出其重复率。

### 示例

- **原文示例**：今天是星期天，天气晴，今天晚上我要去看电影。
- **抄袭版示例**：今天是周天，天气晴朗，我晚上要去看电影。
- **输出结果**：相似度百分比（精确到小数点后两位）

### 核心算法
- **余弦相似度算法**：计算两个文档向量的夹角余弦值
- **中英文混合处理**：支持中文双字符分词和英文单词提取
- **停用词过滤**：去除常见无意义词汇，提高检测精度

### 性能优化
- **预编译正则表达式**：提高文本处理速度
- **LRU缓存机制**：避免重复计算相同文本
- **批量处理**：使用列表推导式和向量化操作
- **性能提升**：相比初版减少80%函数调用，提速56%

### 代码质量
- **类型注解**：完整的类型提示支持
- **异常处理**：健壮的错误处理机制
- **多编码支持**：自动检测UTF-8、GBK等编码格式
- **单元测试**：18个测试用例，覆盖各种边界情况

## 使用方法
1. **命令行**：
```bash
python main.py [原文文件绝对路径] [抄袭版文件绝对路径] [答案文件绝对路径]
```

### 示例命令

```bash
python main.py C:\tests\orig.txt C:\tests\orig_add.txt C:\tests\result.txt
```

### 参数说明

**原文文件**：论文原文的文件绝对路径               
**抄袭版文件**：抄袭版论文的文件绝对路径  
**答案文件**：输出结果的文件绝对路径

2. **PyCharm**
### 运行完整测试套件（18个测试用例）
**python test_main.py**

### 运行性能分析
**python profile_main.py**

### 运行代码质量检查
**python code_quality_check.py**

## 环境要求
- Python 3.13.3
```bash
pip install -r requirements.txt
```
- 标准库：`re`, `math`, `string`, `collections`
- 开发工具：`pylint`, `flake8`, `black`, `mypy`
- 测试框架：`pytest`, `pytest-cov`, `coverage`

## 测试

### 运行单元测试

```bash
python test_main.py
```

### 测试覆盖的场景

1. 文件读取成功/失败
2. 文本预处理（正常/空文本）
3. 词频计算
4. 余弦相似度计算
5. 结果文件写入
6. 参数验证
7. 集成测试（完全相同/部分相似）
8. 中英文混合文本处理
9. 特殊字符处理

### 性能分析

```bash
python profile_main.py
```

## 算法详解

### 文本预处理流程

1. **去除标点符号**：清理各种中英文标点
2. **文本分词**：
   - 英文：基于正则表达式提取单词
   - 中文：双字符滑窗分词
3. **停用词过滤**：移除常见无意义词汇
4. **大小写标准化**：统一转为小写

### 相似度计算

使用余弦相似度公式：

```
similarity = (A · B) / (||A|| × ||B||)
```
- A, B 为两个文档的词频向量
- A · B 为向量点积
- ||A||, ||B|| 为向量模长

### 输出格式

- 结果以百分比形式输出
- 精确到小数点后两位
- 范围：0.00 - 100.00

### 代码质量检查

```bash
# 代码风格检查
flake8 main.py

# 代码质量分析
pylint main.py

# 代码格式化
black main.py

# 类型检查
mypy main.py
```

### 性能监控

项目集成了性能分析工具，可以监控：
- 函数调用次数和耗时
- 内存使用情况
- 性能瓶颈识别

### 测试环境要求

- 内存限制：< 2048MB
- 时间限制：< 5秒
- 支持平台：Windows

##  项目结构

```
3123004805_Paper_Test/
├── 核心文件
│   ├── main.py                      # 主程序入口
│   ├── requirements.txt             # 项目依赖包列表
│   └── README.md                   # 项目文档说明
│
├── 测试文件
│   ├── test_main.py                # 完整版单元测试（18个测试用例）
│   ├── orig.txt                    # 原文测试文件
│   ├── orig_0.8_add.txt           # 测试用例：添加内容版本
│   ├── orig_0.8_del.txt           # 测试用例：删除内容版本
│   ├── orig_0.8_dis_1.txt         # 测试用例：替换1%内容版本
│   ├── orig_0.8_dis_10.txt        # 测试用例：替换10%内容版本
│   └── orig_0.8_dis_15.txt        # 测试用例：替换15%内容版本
│
├── 分析工具
│   ├── profile_main.py             # 性能分析脚本
│   ├── code_quality_check.py       # 代码质量检查工具
│   ├── test_coverage.py            # 测试覆盖率分析工具

```